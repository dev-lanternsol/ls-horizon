
{% capture controls %}
  {%- render 'slideshow-controls',
    style: block.settings.slideshow_controls_style,
    autoplay: block.settings.autoplay,
    item_count: block.blocks.size,
    show_arrows: false,
    arrows_on_media: true,
    controls_on_media: true,
    pagination_position: 'center',
    icon_style: block.settings.icons_style,
    custom_icon: block.settings.custom_icon,
    custom_icon_width: block.settings.custom_icon_width,
    show_arrows_desktop: block.settings.show_arrows_desktop,
    show_arrows_mobile: block.settings.show_arrows_mobile,
    arrows_position: block.settings.arrows_position,
    mobile_arrows_position: block.settings.mobile_arrows_position
  -%}
{% endcapture %}

{% capture slides %}
  {% content_for 'blocks' %}
{% endcapture %}

{% liquid
  assign slideshow_class = 'slideshow--single-media'
  if block.blocks.size > 1
    assign slideshow_class = ''
  endif

  assign show_arrows = true
  if block.settings.icons_style == 'none' or block.blocks.size <= 1
    assign show_arrows = false
  endif
%}

<div class="color-{{ block.settings.color_scheme }}"></div>
<div
  class="spacing-style section section--{{ block.settings.section_width }} color-{{ block.settings.color_scheme }} disable-section-top-offset"
  style="{% render 'spacing-padding', settings: block.settings %}"
>
  {% render 'slideshow',
    class: slideshow_class,
    controls: controls,
    show_arrows: show_arrows,
    icon_style: block.settings.icons_style,
    autoplay: block.settings.autoplay,
    autoplay_speed: block.settings.autoplay_speed,
    slides: slides,
    slide_count: block.blocks.size,
    slide_size: block.settings.slide_height,
    custom_icon: block.settings.custom_icon,
    custom_icon_width: block.settings.custom_icon_width,
    slides_to_show: block.settings.slides_to_show,
    mobile_slides_to_show: block.settings.mobile_slides_to_show,
    slides_to_scroll: block.settings.slides_to_scroll,
    mobile_slides_to_scroll: block.settings.mobile_slides_to_scroll
  %}
</div>

{% schema %}
{
  "name": "t:names.slideshow",
  "tag": null,
  "blocks": [
    {
      "type": "_slide"
    }
  ],
  "settings": [
    {
      "type": "select",
      "id": "icons_style",
      "label": "t:settings.navigation",
      "options": [
        {
          "value": "arrow",
          "label": "t:options.arrows"
        },
        {
          "value": "chevron",
          "label": "t:options.chevrons"
        },
        {
          "value": "arrows_large",
          "label": "t:options.large_arrows"
        },
        {
          "value": "chevron_large",
          "label": "t:options.large_chevrons"
        },
        {
          "value": "custom",
          "label": "Custom"
        },
        {
          "value": "none",
          "label": "t:options.none"
        }
      ],
      "default": "arrows_large"
    },
    {
      "type": "image_picker",
      "id": "custom_icon",
      "label": "Custom arrow",
      "visible_if": "{{ block.settings.icons_style == 'custom' }}"
    },
    {
      "type": "range",
      "id": "custom_icon_width",
      "label": "Custom arrow width",
      "min": 10,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 30,
      "visible_if": "{{ block.settings.icons_style == 'custom' }}"
    },
    {
      "type": "header",
      "content": "Slides per view"
    },
    {
      "type": "range",
      "id": "slides_to_show",
      "label": "Desktop slides to show",
      "min": 1,
      "max": 5,
      "step": 1,
      "default": 1
    },
    {
      "type": "range",
      "id": "mobile_slides_to_show",
      "label": "Mobile slides to show",
      "min": 1,
      "max": 3,
      "step": 1,
      "default": 1
    },
    {
      "type": "header",
      "content": "Slides to scroll"
    },
    {
      "type": "range",
      "id": "slides_to_scroll",
      "label": "Desktop slides to scroll",
      "min": 1,
      "max": 5,
      "step": 1,
      "default": 1
    },
    {
      "type": "range",
      "id": "mobile_slides_to_scroll",
      "label": "Mobile slides to scroll",
      "min": 1,
      "max": 3,
      "step": 1,
      "default": 1
    },
    {
      "type": "header",
      "content": "Arrow Settings"
    },
    {
      "type": "checkbox",
      "id": "show_arrows_desktop",
      "label": "Show arrows on desktop",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_arrows_mobile",
      "label": "Show arrows on mobile",
      "default": true
    },
    {
      "type": "select",
      "id": "arrows_position",
      "label": "Desktop arrow position",
      "options": [
        {
          "value": "top",
          "label": "Top"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "bottom",
          "label": "Bottom"
        }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "mobile_arrows_position",
      "label": "Mobile arrow position",
      "options": [
        {
          "value": "top",
          "label": "Top"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "bottom",
          "label": "Bottom"
        }
      ],
      "default": "center"
    },
    {
      "type": "select",
      "id": "slideshow_controls_style",
      "label": "t:settings.pagination",
      "options": [
        {
          "value": "dots",
          "label": "t:options.dots"
        },
        {
          "value": "counter",
          "label": "t:options.counter"
        },
        {
          "value": "none",
          "label": "t:options.none"
        }
      ],
      "default": "dots"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "t:settings.color_scheme",
      "default": "primary"
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "t:settings.auto_rotate_slides",
      "default": false
    },
    {
      "type": "range",
      "id": "autoplay_speed",
      "label": "t:settings.speed",
      "min": 3,
      "max": 7,
      "step": 1,
      "unit": "s",
      "default": 4,
      "visible_if": "{{ block.settings.autoplay }}"
    },
    {
      "type": "header",
      "content": "t:content.size"
    },
    {
      "type": "select",
      "id": "section_width",
      "label": "t:settings.width",
      "options": [
        {
          "value": "page-width",
          "label": "t:options.page"
        },
        {
          "value": "full-width",
          "label": "t:options.full"
        }
      ],
      "default": "full-width"
    },
    {
      "type": "select",
      "id": "slide_height",
      "options": [
        {
          "value": "auto",
          "label": "t:options.auto"
        },
        {
          "value": "small",
          "label": "t:options.small"
        },
        {
          "value": "medium",
          "label": "t:options.medium"
        },
        {
          "value": "large",
          "label": "t:options.large"
        }
      ],
      "default": "medium",
      "label": "t:settings.height"
    },
    {
      "type": "header",
      "content": "t:content.padding"
    },
    {
      "type": "range",
      "id": "padding-block-start",
      "label": "t:settings.top",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    },
    {
      "type": "range",
      "id": "padding-block-end",
      "label": "t:settings.bottom",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "px",
      "default": 0
    }
  ],
  "presets": [
    {
      "name": "t:names.slideshow",
      "category": "t:categories.storytelling",
      "blocks": {
        "slide_1": {
          "type": "_slide",
          "settings": {
            "horizontal_alignment_flex_direction_column": "center"
          },
          "blocks": {
            "group": {
              "type": "group",
              "settings": {
                "horizontal_alignment_flex_direction_column": "center",
                "width": "custom",
                "custom_width": 50,
                "width_mobile": "custom",
                "inherit_color_scheme": false,
                "color_scheme": "scheme-6",
                "custom_width_mobile": 85,
                "padding-inline-start": 48,
                "padding-inline-end": 48,
                "padding-block-start": 48,
                "padding-block-end": 48
              },
              "blocks": {
                "heading": {
                  "type": "text",
                  "settings": {
                    "text": "<h2>New arrivals</h2>"
                  }
                },
                "text": {
                  "type": "text",
                  "settings": {
                    "text": "<p>Introducing our latest products, made especially for the season. Shop your favorites before they're gone!</p>",
                    "padding-block-end": 20
                  }
                },
                "button": {
                  "type": "button",
                  "settings": {
                    "label": "Shop now",
                    "link": "shopify://collections/all"
                  }
                }
              },
              "block_order": ["heading", "text", "button"]
            }
          },
          "block_order": ["group"]
        },
        "slide_2": {
          "type": "_slide",
          "settings": {
            "horizontal_alignment_flex_direction_column": "center"
          },
          "blocks": {
            "group": {
              "type": "group",
              "settings": {
                "horizontal_alignment_flex_direction_column": "center",
                "width": "custom",
                "custom_width": 50,
                "width_mobile": "custom",
                "inherit_color_scheme": false,
                "color_scheme": "scheme-6",
                "custom_width_mobile": 85,
                "padding-inline-start": 48,
                "padding-inline-end": 48,
                "padding-block-start": 48,
                "padding-block-end": 48
              },
              "blocks": {
                "heading": {
                  "type": "text",
                  "settings": {
                    "text": "<h2>Bestsellers</h2>"
                  }
                },
                "text": {
                  "type": "text",
                  "settings": {
                    "text": "<p>Discover the bestsellers that have captured the hearts of our customers with their perfect blend of functionality and style.</p>",
                    "padding-block-end": 20
                  }
                },
                "button": {
                  "type": "button",
                  "settings": {
                    "label": "Shop now",
                    "link": "shopify://collections/all"
                  }
                }
              },
              "block_order": ["heading", "text", "button"]
            }
          },
          "block_order": ["group"]
        }
      },
      "block_order": ["slide_1", "slide_2"]
    }
  ]
}
{% endschema %}
